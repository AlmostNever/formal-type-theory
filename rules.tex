% All the inference rules are defined here as macros.

\newcommand{\rulename}[1]{\text{\textsc{#1}}}
\newcommand{\referTo}[2]{\hyperref[#2]{$\rulename{#1}$}}

%%%% Contexts


\newcommand{\rlCtxEmpty}{\referTo{ctx-empty}{rul:ctx-empty}}
\newcommand{\showCtxEmpty}{%
  \infer[\rulename{ctx-empty}] % CtxEmpty
  { }
  {\isctx{\ctxempty}}
}


\newcommand{\rlCtxExtend}{\referTo{ctx-extend}{rul:ctx-extend}}
\newcommand{\showCtxExtend}{%
  \infer[\rulename{ctx-extend}] % CtxExtend
  {\istype{\G}{\A}
  }
  {\isctx{(\ctxextend{\G}{\A})}}
}


%%%% Substitutions

\newcommand{\rlSubstZero}{\referTo{subst-zero}{rul:subst-zero}}
\newcommand{\showSubstZero}{%
  \infer[\rulename{subst-zero}] % SubstZero
  {\isterm{\G}{\uu}{\A}}
  {\issubst{\sbzero{\G}{\A}{\uu}}{\G}{\ctxextend{\G}{\A}}}
}

\newcommand{\rlSubstWeak}{\referTo{subst-weak}{rul:subst-weak}}
\newcommand{\showSubstWeak}{%
  \infer[\rulename{subst-weak}] % SubstWeak
  {\istype{\G}{\A}}
  {\issubst
    {\sbweak{\G}{\A}}
    {\ctxextend{\G}{\A}}
    {\G}
  }
}

\newcommand{\rlSubstShift}{\referTo{subst-shift}{rul:subst-shift}}
\newcommand{\showSubstShift}{%
  \infer[\rulename{subst-shift}] % SubstShift
  {\issubst{\sbs}{\G}{\D} \\
   \istype{\D}{\A}
  }
  {\issubst
      {(\sbshift{\G}{\A}{\sbs})}
      {\ctxextend{\G}{\subst{\A}{\sbs}}}
      {\ctxextend{\D}{\A}}
  }
}

%%%% Types


\newcommand{\rlTyCtxConv}{\referTo{ty-ctx-conv}{rul:ty-ctx-conv}}
\newcommand{\showTyCtxConv}{%
  \infer[\rulename{ty-ctx-conv}] % TyCtxConv
  {\istype{\G}{\A} \\
    \eqctx{\G}{\D}
  }
  {\istype{\D}{\A}}
}


\newcommand{\rlTySubst}{\referTo{ty-subst}{rul:ty-subst}}
\newcommand{\showTySubst}{%
  \infer[\rulename{ty-subst}] % TySubst
  {\issubst{\sbs}{\G}{\D} \\
    \istype{\D}{\A}
  }
  {\istype{\G}{\subst{\A}{\sbs}}}
}

% We want \istype{\G}{\A} because in the sanity theorem we
% need to prove that \G is a context (without inversion on the
% extended context).

\newcommand{\rlTyProd}{\referTo{ty-prod}{rul:ty-prod}}
\newcommand{\showTyProd}{%
  \infer[\rulename{ty-prod}] % TyProd
  {\istype{\G}{\A} \\
    \istype{\ctxextend{\G}{\A}}{\B}
  }
  {\istype{\G}{\Prod{\A}{\B}}}
}


\newcommand{\rlTyId}{\referTo{ty-id}{rul:ty-id}}
\newcommand{\showTyId}{%
  \infer[\rulename{ty-id}] % TyId
  {\istype{\G}{\A}\\
    \isterm{\G}{\uu}{\A}\\
    \isterm{\G}{\vv}{\A}
  }
  {\istype{\G}{\Id{\A}{\uu}{\vv}}}
}


%%%% Terms


\newcommand{\rlTermTyConv}{\referTo{term-ty-conv}{rul:term-ty-conv}}
\newcommand{\showTermTyConv}{%
  \infer[\rulename{term-ty-conv}] % TermTyConv
  {\isterm{\G}{\uu}{\A} \\
    \eqtype{\G}{\A}{\B}
  }
  {\isterm{\G}{\uu}{\B}}
}


\newcommand{\rlTermCtxConv}{\referTo{term-ctx-conv}{rul:term-ctx-conv}}
\newcommand{\showTermCtxConv}{%
  \infer[\rulename{term-ctx-conv}] % TermCtxConv
  {\isterm{\G}{\uu}{\A} \\
    \eqctx{\G}{\D}
  }
  {\isterm{\D}{\uu}{\A}}
}


\newcommand{\rlTermSubst}{\referTo{term-subst}{rul:term-subst}}
\newcommand{\showTermSubst}{%
  \infer[\rulename{term-subst}] % TermSubst
  {\issubst{\sbs}{\G}{\D} \\
    \isterm{\D}{\uu}{\A}
  }
  {\isterm{\G}{\subst{\uu}{\sbs}}{\subst{\A}{\sbs}}}
}


\newcommand{\rlTermVarZero}{\referTo{term-var-zero}{rul:term-var-zero}}
\newcommand{\showTermVarZero}{%
  \infer[\rulename{term-var-zero}] % TermVarZero
  {
    \istype{\G}{\A}
  }
  {\isterm
    {\ctxextend{\G}{\A}}
    {\var{0}}
    {\subst{\A}{\sbweak{\G}{\A}}}
  }
}


\newcommand{\rlTermVarSucc}{\referTo{term-var-succ}{rul:term-var-succ}}
\newcommand{\showTermVarSucc}{%
  \infer[\rulename{term-var-succ}] % TermVarSucc
  {\isterm{\G}{\var{k}}{\A} \\
    \istype{\G}{\B}
  }
  {\isterm
    {\ctxextend{\G}{\B}}
    {\var{k+1}}
    {\subst{\A}{\sbweak{\G}{\B}}}
  }
}



% Remark: we want \istype{\G}{\A} as a premise because in order to form the
% product type we need it, and we do not want to resort to inversion on the
% extended context.

\newcommand{\rlTermAbs}{\referTo{term-abs}{rul:term-abs}}
\newcommand{\showTermAbs}{%
  \infer[\rulename{term-abs}] % TermAbs
  { \istype{\G}{\A} \\
    \isterm{\ctxextend{\G}{\A}}{\uu}{\B}
  }
  {\isterm{\G}{(\lam{\A}{\B}{\uu})}{\Prod{\A}{\B}}}
}


% Remark: we want \istype{\ctxextend{\G}{\A}}{\B} because we need to
% know that \B is a type in \ctxextend{\G}{\A} and we want to avoid
% inversion on ty-prod.

\newcommand{\rlTermApp}{\referTo{term-app}{rul:term-app}}
\newcommand{\showTermApp}{%
  \infer[\rulename{term-app}] % TermApp
  {\istype{\ctxextend{\G}{\A}}{\B} \\
    \isterm{\G}{\uu}{\Prod{\A} \B} \\
    \isterm{\G}{\vv}{\A}
  }
  {\isterm
    {\G}
    {\app{\uu}{\A}{\B}{\vv}}
    {\subst{\B}{\sbzero{\G}{\A}{\vv}}}
  }
}


\newcommand{\rlTermRefl}{\referTo{term-refl}{rul:term-refl}}
\newcommand{\showTermRefl}{%
  \infer[\rulename{term-refl}] % TermRefl
  {\isterm{\G}{\uu}{\A}}
  {\isterm{\G}{\refl{\A} \uu}{\Id{\A}{\uu}{\uu}}}
}


%%%% Context equality


\newcommand{\rlEqCtxEmpty}{\referTo{eq-ctx-empty}{rul:eq-ctx-empty}}
\newcommand{\showEqCtxEmpty}{%
  \infer[\rulename{eq-ctx-empty}] % EqCtxEmpty
  { }
  {\eqctx{\ctxempty}{\ctxempty}}
}


\newcommand{\rlEqCtxExtend}{\referTo{eq-ctx-extend}{rul:eq-ctx-extend}}
\newcommand{\showEqCtxExtend}{%
  \infer[\rulename{eq-ctx-extend}] % EqCtxExtend
  {
    \eqtype{\G}{\A}{\B}
  }
  {\eqctx{(\ctxextend{\G}{\A})}{(\ctxextend{\G}{\B})}}
}


%%%% Type equality


\newcommand{\rlEqTyCtxConv}{\referTo{eq-ty-ctx-conv}{rul:eq-ty-ctx-conv}}
\newcommand{\showEqTyCtxConv}{%
  \infer[\rulename{eq-ty-ctx-conv}] % EqTyCtxConv
  {\eqtype{\G}{\A}{\B}\\
    \eqctx{\G}{\D}}
  {\eqtype{\D}{\A}{\B}}
}


\newcommand{\rlEqTyRefl}{\referTo{eq-ty-refl}{rul:eq-ty-refl}}
\newcommand{\showEqTyRefl}{%
  \infer[\rulename{eq-ty-refl}] % EqTyRefl
  {\istype{\G}{\A}}
  {\eqtype{\G}{\A}{\A}}
}


\newcommand{\rlEqTySym}{\referTo{eq-ty-sym}{rul:eq-ty-sym}}
\newcommand{\showEqTySym}{%
  \infer[\rulename{eq-ty-sym}] % EqTySym
  {\eqtype{\G}{\B}{\A}}
  {\eqtype{\G}{\A}{\B}}
}


\newcommand{\rlEqTyTrans}{\referTo{eq-ty-trans}{rul:eq-ty-trans}}
\newcommand{\showEqTyTrans}{%
  \infer[\rulename{eq-ty-trans}] % EqTyTrans
  {\eqtype{\G}{\A}{\B}\\
    \eqtype{\G}{\B}{\C}}
  {\eqtype{\G}{\A}{\C}}
}


\newcommand{\rlEqTyWeakNat}{\referTo{eq-ty-weak-nat}{rul:eq-ty-weak-nat}}
\newcommand{\showEqTyWeakNat}{%
  \infer[\rulename{eq-ty-weak-nat}] % EqTyWeakNat
  {\issubst{\sbs}{\G}{\D} \\
   \istype{\D}{\A} \\
   \istype{\D}{\B}
  }
  {\eqtype
   {\ctxextend{\G}{\subst{\A}{\sbs}}}
   {\subst{(\subst{\B}{\sbweak{\D}{\A}})}{\sbshift{\G}{\A}{\sbs}}}
   {\subst{(\subst{\B}{\sbs})}{\sbweak{\G}{\subst{\A}{\sbs}}}}
  }
}


\newcommand{\rlEqTyWeakZero}{\referTo{eq-ty-weak-zero}{rul:eq-ty-weak-zero}}
\newcommand{\showEqTyWeakZero}{%
  \infer[\rulename{eq-ty-weak-zero}]
  {\istype{\G}{\A} \\
   \isterm{\G}{\uu}{\B}
  }
  {\eqtype{\G}
    {\subst{(\subst{\A}{\sbweak{\G}{\B}})}{\sbzero{\G}{\B}{\uu}}}
    {\A}
  }
}


\newcommand{\rlEqTyShiftZero}{\referTo{eq-ty-shift-zero}{rul:eq-ty-shift-zero}}
\newcommand{\showEqTyShiftZero}{%
  \infer[\rulename{eq-ty-shift-zero}]
  {\issubst{\sbs}{\G}{\D} \\
   \istype{\ctxextend{\D}{\A}}{\B} \\
   \isterm{\D}{\vv}{\A}
  }
  {\eqtype{\G}
    {\subst
      {(\subst{\B}{\sbshift{\G}{\A}{\sbs}})}
      {\sbzero{\G}{\subst{\A}{\sbs}}{\subst{\vv}{\sbs}}}
    }
    {\subst{(\subst{\B}{\sbzero{\D}{\A}{\vv}})}{\sbs}}
  }
}


\newcommand{\rlEqTyCongZero}{\referTo{eq-ty-cong-zero}{rul:eq-ty-cong-zero}}
\newcommand{\showEqTyCongZero}{%
  \infer[\rulename{eq-ty-cong-zero}]
  {\eqtype{\G}{\A_1}{\A_2} \\
   \isterm{\G}{\uu_1}{\A_1} \\
   \isterm{\G}{\uu_2}{\A_2} \\
   \istype{\ctxextend{\G}{\A_1}}{\B}
  }
  {\eqtype{\G}
    {\subst{\B}{\sbzero{\G}{\A_1}{\uu_1}}}
    {\subst{\B}{\sbzero{\G}{\A_2}{\uu_2}}}
  }
}


\newcommand{\rlEqTySubstProd}{\referTo{eq-ty-subst-prod}{rul:eq-ty-subst-prod}}
\newcommand{\showEqTySubstProd}{%
  \infer[\rulename{eq-ty-subst-prod}] % EqTySubstProd
  {\issubst{\sbs}{\G}{\D} \\
    \istype{\D}{\A} \\
    \istype{\ctxextend{\D}{\A}}{\B}
  }
  {\eqtype{\G}
    {\subst{(\Prod{\A}{\B})}{\sbs}}
    {\Prod
      {\subst{\A}{\sbs}}
      {\subst{\B}{\sbshift{\G}{\A}{\sbs}}}
    }
  }
}


\newcommand{\rlEqTySubstId}{\referTo{eq-ty-subst-id}{rul:eq-ty-subst-id}}
\newcommand{\showEqTySubstId}{%
  \infer[\rulename{eq-ty-subst-id}] % EqTySubstId
  {\issubst{\sbs}{\G}{\D} \\
    \istype{\D}{\A} \\
    \isterm{\D}{\uu}{\A} \\
    \isterm{\D}{\vv}{\A}
  }
  {\eqtype{\G}
    {\subst{(\Id{\A}{\uu}{\vv})}{\sbs}}
    {\Id{\subst{\A}{\sbs}}{\subst{\uu}{\sbs}}{\subst{\vv}{\sbs}}}
  }
}


\newcommand{\rlCongProd}{\referTo{cong-prod}{rul:cong-prod}}
\newcommand{\showCongProd}{%
  \infer[\rulename{cong-prod}] % CongProd
  {\eqtype{\G}{\A_1}{\B_1}\\
    \eqtype{\ctxextend{\G}{\A_1}}{\A_2}{\B_2}}
  {\eqtype{\G}{\Prod{\A_1}{\A_2}}{\Prod{\B_1}{\B_2}}}
}


\newcommand{\rlCongId}{\referTo{cong-id}{rul:cong-id}}
\newcommand{\showCongId}{%
  \infer[\rulename{cong-id}] % CongId
  {\eqtype{\G}{\A}{\B}\\
    \eqterm{\G}{\uu_1}{\vv_1}{\A}\\
    \eqterm{\G}{\uu_2}{\vv_2}{\A}
  }
  {\eqtype{\G}{\Id{\A}{\uu_1}{\uu_2}}
    {\Id{\B}{\vv_1}{\vv_2}}}
}


\newcommand{\rlCongTySubst}{\referTo{cong-ty-subst}{rul:cong-ty-subst}}
\newcommand{\showCongTySubst}{%
  \infer[\rulename{cong-ty-subst}] % CongTySubst
  {\issubst{\sbs}{\G}{\D} \\
    \eqtype{\D}{\A}{\B}
  }
  {\eqtype{\G}{\subst{\A}{\sbs}}{\subst{\B}{\sbs}}}
}


%%%% Term equality


\newcommand{\rlEqTyConv}{\referTo{eq-ty-conv}{rul:eq-ty-conv}}
\newcommand{\showEqTyConv}{%
  \infer[\rulename{eq-ty-conv}] % EqTyConv
  {\eqterm{\G}{\uu}{\vv}{\A}\\
    \eqtype{\G}{\A}{\B}}
  {\eqterm{\G}{\uu}{\vv}{\B}}
}


\newcommand{\rlEqCtxConv}{\referTo{eq-ctx-conv}{rul:eq-ctx-conv}}
\newcommand{\showEqCtxConv}{%
  \infer[\rulename{eq-ctx-conv}] % EqCtxConv
  {\eqterm{\G}{\uu}{\vv}{\A}\\
    \eqctx{\G}{\D}}
  {\eqterm{\D}{\uu}{\vv}{\A}}
}


\newcommand{\rlEqRefl}{\referTo{eq-refl}{rul:eq-refl}}
\newcommand{\showEqRefl}{%
  \infer[\rulename{eq-refl}] % EqRefl
  {\isterm{\G}{\uu}{\A}}
  {\eqterm{\G}{\uu}{\uu}{\A}}
}


\newcommand{\rlEqSym}{\referTo{eq-sym}{rul:eq-sym}}
\newcommand{\showEqSym}{%
  \infer[\rulename{eq-sym}] % EqSym
  {\eqterm{\G}{\vv}{\uu}{\A}}
  {\eqterm{\G}{\uu}{\vv}{\A}}
}


\newcommand{\rlEqTrans}{\referTo{eq-trans}{rul:eq-trans}}
\newcommand{\showEqTrans}{%
  \infer[\rulename{eq-trans}] % EqTrans
  {\eqterm{\G}{\uu}{\vv}{\A}\\
    \eqterm{\G}{\vv}{\ww}{\A}}
  {\eqterm{\G}{\uu}{\ww}{\A}}
}



\newcommand{\rlEqSubstWeak}{\referTo{eq-subst-weak}{rul:eq-subst-weak}}
\newcommand{\showEqSubstWeak}{%
  \infer[\rulename{eq-subst-weak}] % EqSubstWeak
  {\isterm{\G}{\var{k}}{\A} \\
    \istype{\G}{\B}
  }
  {\eqterm{\ctxextend{\G}{\B}}
    {\subst{\var{k}}{\sbweak{\G}{\B}}}
    {\var{k+1}}
    {\subst{\A}{\sbweak{\G}{\B}}}
  }
}


\newcommand{\rlEqSubstZeroZero}{\referTo{eq-subst-zero-zero}{rul:eq-subst-zero-zero}}
\newcommand{\showEqSubstZeroZero}{%
  \infer[\rulename{eq-subst-zero-zero}] % EqSubstZeroZero
  {
    \isterm{\G}{\uu}{\A}
  }
  {\eqterm{\G}
    {\subst{\var{0}}{\sbzero{\G}{\A}{\uu}}}
    {\uu}
    {\A}
  }
}

\newcommand{\rlEqSubstZeroSucc}{\referTo{eq-subst-zero-succ}{rul:eq-subst-zero-succ}}
\newcommand{\showEqSubstZeroSucc}{%
  \infer[\rulename{eq-subst-zero-succ}] % EqSubstZeroSucc
  {
    \isterm{\G}{\var{k}}{\A} \\
    \isterm{\G}{\uu}{\B}
  }
  {\eqterm{\G}
    {\subst
      {\var{k+1}}
      {\sbzero{\G}{\B}{\uu}}
    }
    {\var{k}}
    {\A}
  }
}

\newcommand{\rlEqSubstShiftZero}{\referTo{eq-subst-shift-zero}{rul:eq-subst-shift-zero}}
\newcommand{\showEqSubstShiftZero}{%
  \infer[\rulename{eq-subst-shift-zero}] % EqSubstShiftZero
  {\issubst{\sbs}{\G}{\D}\\
   \istype{\D}{\A}
  }
  {\eqterm
   {\ctxextend{\G}{\subst{\A}{\sbs}}}
   {\subst{\var{0}}{\sbshift{\G}{\A}{\sbs}}}
   {\var{0}}
   {\subst{(\subst{\A}{\sbs})}{\sbweak{\G}{\subst{\A}{\sbs}}}}
  }
}

\newcommand{\rlEqSubstShiftSucc}{\referTo{eq-subst-shift-succ}{rul:eq-subst-shift-succ}}
\newcommand{\showEqSubstShiftSucc}{%
  \infer[\rulename{eq-subst-shift-succ}] % EqSubstShiftSucc
  {\issubst{\sbs}{\G}{\D} \\
   \isterm{\D}{\var{k}}{\B} \\
   \istype{\D}{\A}
  }
  {\eqterm
   {\ctxextend{\G}{\subst{\A}{\sbs}}}
   {\subst{\var{k+1}}{\sbshift{\G}{\A}{\sbs}}}
   {\subst{(\subst{\var{k}}{\sbs})}{\sbweak{\G}{\subst{\A}{\sbs}}}}
   {\subst{\subst{\B}{\sbs}}{\sbweak{\G}{\subst{\A}{\sbs}}}}
  }
}



\newcommand{\rlEqSubstAbs}{\referTo{eq-subst-abs}{rul:eq-subst-abs}}
\newcommand{\showEqSubstAbs}{%
  \infer[\rulename{eq-subst-abs}] % EqSubstAbs
  {\issubst{\sbs}{\G}{\D} \\
   \istype{\D}{\A} \\
    \isterm{\ctxextend{\D}{\A}}{\uu}{\B}
  }
  {\eqterm{\G}
    {\subst{(\lam{\A}{\B} \uu)}{\sbs}}
    {(\lam
      {\subst{\A}{\sbs}}
      {\subst
        {\B}
        {\sbshift{\G}{\A}{\sbs}}
      }
      \subst{\uu}{\sbshift{\G}{\A}{\sbs}})
    }
    {\Prod
      {\subst{\A}{\sbs}}
      {\subst
        {\B}
        {\sbshift{\G}{\A}{\sbs}}
      }
    }
  }
}


\newcommand{\rlEqSubstApp}{\referTo{eq-subst-app}{rul:eq-subst-app}}
\newcommand{\showEqSubstApp}{%
  \infer[\rulename{eq-subst-app}] % EqSubstApp
  {\issubst{\sbs}{\G}{\D} \\
    \istype{\ctxextend{\D}{\A}}{\B} \\
    \isterm{\D}{\uu}{\Prod{\A}{\B}} \\
    \isterm{\D}{\vv}{\A}
  }
  {\eqterm{\G}
    {\subst{(\app{\uu}{\A}{\B}{\vv})}{\sbs}}
    {\app
      {\subst{\uu}{\sbs}}
      {\subst{\A}{\sbs}}
      {\subst
        {\B}
        {\sbshift{\G}{\A}{\sbs}}
      }
      {\subst{\vv}{\sbs}}}
    {\subst
      {(\subst{\B}{\sbzero{\D}{\A}{\vv}})}
      {\sbs}
    }
  }
}


\newcommand{\rlEqSubstRefl}{\referTo{eq-subst-refl}{rul:eq-subst-refl}}
\newcommand{\showEqSubstRefl}{%
  \infer[\rulename{eq-subst-refl}] % EqSubstRefl
  {\issubst{\sbs}{\G}{\D} \\
    \isterm{\D}{\uu}{\A}
  }
  {\eqterm{\G}
    {\subst{(\refl{\A}{\uu})}{\sbs}}
    {\refl{\subst{\A}{\sbs}}{\subst{\uu}{\sbs}}}
    {\Id{\subst{\A}{\sbs}}{\subst{\uu}{\sbs}}{\subst{\uu}{\sbs}}}
  }
}


%


\newcommand{\rlEqReflection}{\referTo{eq-reflection}{rul:eq-reflection}}
\newcommand{\showEqReflection}{%
  \infer[\rulename{eq-reflection}] % EqReflection
  {\isterm{\G}{\ww_1}{\Id{\A}{\uu}{\vv}} \\
    \isterm{\G}{\ww_2}{\textsf{UIP}(\A)}
  }
  {\eqterm{\G}{\uu}{\vv}{\A}}
}


\newcommand{\rlProdBeta}{\referTo{prod-beta}{rul:prod-beta}}
\newcommand{\showProdBeta}{%
  \infer[\rulename{prod-beta}] % ProdBeta
  {\isterm{\ctxextend{\G}{\A}}{\uu}{\B}\\
    \isterm{\G}{\vv}{\A}}
  {\eqterm{\G}{\bigl(\app{(\lam{\A}{\B}{\uu})}{\A}{\B}{\vv}\bigr)}
    {\subst{\uu}{\sbzero{\G}{\A}{\vv}}}
    {\subst{\B}{\sbzero{\G}{\A}{\vv}}}}
}


\newcommand{\rlProdEta}{\referTo{prod-eta}{rul:prod-eta}}
\newcommand{\showProdEta}{%
  \infer[\rulename{prod-eta}] % ProdEta
  {\isterm{\G}{\uu}{\Prod{\A}{\B}}\\
    \isterm{\G}{\vv}{\Prod{\A}{\B}}\\\\
    \eqterm
    {\ctxextend{\G}{\A}}
    {(\app
      {\subst{\uu}{\sbweak{\G}{\A}}}
      {\subst{\A}{\sbweak{\G}{\A}}}
      {\subst
        {\B}
        {\sbshift
          {\ctxextend{\G}{\A}}
          {\A}
          {\sbweak{\G}{\A}}
        }
      }
      {\var{0}})
    }
    {(\app
      {\subst{\vv}{\sbweak{\G}{\A}}}
      {\subst{\A}{\sbweak{\G}{\A}}}
      {\subst
        {\B}
        {\sbshift
          {\ctxextend{\G}{\A}}
          {\A}
          {\sbweak{\G}{\A}}
        }
      }
      {\var{0}})
    }
    {\B}
  }
  {\eqterm{\G}{\uu}{\vv}{\Prod{\A}{\B}}}
}


\newcommand{\rlCongAbs}{\referTo{cong-abs}{rul:cong-abs}}
\newcommand{\showCongAbs}{%
  \infer[\rulename{cong-abs}] % CongAbs
  {\eqtype{\G}{\A_1}{\B_1}\\
    \eqtype{\ctxextend{\G}{\A_1}}{\A_2}{\B_2}\\
    \eqterm{\ctxextend{\G}{\A_1}}{\uu_1}{\uu_2}{\A_2}}
  {\eqterm{\G}{(\lam{\A_1}{\A_2}{\uu_1})}
    {(\lam{\B_1}{\B_2}{\uu_2})}
    {\Prod{\A_1}{\A_2}}}
}


\newcommand{\rlCongApp}{\referTo{cong-app}{rul:cong-app}}
\newcommand{\showCongApp}{%
  \infer[\rulename{cong-app}] % CongApp
  {\eqtype{\G}{\A_1}{\B_1}\\
    \eqtype{\ctxextend{\G}{\A_1}}{\A_2}{\B_2}\\\\
    \eqterm{\G}{\uu_1}{\vv_1}{\Prod{\A_1}{\A_2}}\\
    \eqterm{\G}{\uu_2}{\vv_2}{\A_1}}
  {\eqterm
    {\G}
    {(\app{\uu_1}{\A_1}{\A_2}{\uu_2})}
    {(\app{\vv_1}{\B_1}{\B_2}{\vv_2})}
    {\subst{\A_2}{\sbzero{\G}{\A_1}{\uu_2}}}
  }
}


\newcommand{\rlCongRefl}{\referTo{cong-refl}{rul:cong-refl}}
\newcommand{\showCongRefl}{%
  \infer[\rulename{cong-refl}] % CongRefl
  {\eqterm{\G}{\uu_1}{\uu_2}{\A_1}\\
    \eqtype{\G}{\A_1}{\A_2}}
  {\eqterm{\G}{\refl{\A_1} \uu_1}{\refl{\A_2} \uu_2}{\Id{\A_1}{\uu_1}{\uu_1}}}
}


\newcommand{\rlCongTermSubst}{\referTo{cong-term-subst}{rul:cong-term-subst}}
\newcommand{\showCongTermSubst}{%
  \infer[\rulename{cong-term-subst}] % CongTermSubst
  {\issubst{\sbs}{\G}{\D} \\
    \eqterm{\D}{\uu_1}{\uu_2}{\A}
  }
  {\eqterm{\G}{\subst{\uu_1}{\sbs}}{\subst{\uu_2}{\sbs}}{\subst{\A}{\sbs}}}
}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
